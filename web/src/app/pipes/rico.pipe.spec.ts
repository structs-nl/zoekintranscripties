import { RicoPipe } from './rico.pipe';
import { RicoRecordSet } from '../models/document';

const mock: RicoRecordSet = {
  'rico:includes': [
    {
      'rico:RecordSet': {
        'rico:identifier': '8258',
        'rico:title':
          'Makassar, 1791 okt. 31 - 1792 okt. 19; N.B.  Bevat ook een overzicht van verkochte goederen, 1791 - 1792. Banjarmasin, 1792  juli 9 - aug. 6; Timor, 1792 mei 16 - sep. 30 ',
        'rico:date': '1791/1792',
        'rico:hasRecordSetType':
          'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#File',
        'rico:includedIn': {
          'rico:RecordSet': {
            'rico:identifier': 'div.nrs.',
            'rico:title':
              'Kopie-missiven en -rapporten ingekomen bij   gouverneur-generaal en raden uit Makassar. Met bijlagen',
            'rico:hasRecordSetType':
              'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#Series',
            'rico:includedIn': {
              'rico:RecordSet': {
                'rico:identifier': 'Deel II/E.5.08',
                'rico:title': 'Makassar',
                'rico:hasRecordSetType':
                  'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#Series',
                'rico:includedIn': {
                  'rico:RecordSet': {
                    'rico:identifier': 'Deel II/E.5',
                    'rico:title':
                      'Kopie-missiven en -rapporten ingekomen bij  gouverneur-generaal en raden van de kantoren in Indië',
                    'html:p':
                      "Van ieder kantoor zijn eerst de reeksen kopie-missiven en  -rapporten met bijlagen opgenomen. Dikwijls zijn echter ook van de bijlagen  aparte reeksen gevormd. Dit is weinig consequent geschied en het is daardoor  mogelijk dat stukken die in zo'n reeks bijlagen ontbreken, terug te vinden zijn  in de reeks kopie-missiven en -rapporten met bijlagen. Met name bij stukken van  na omstreeks 1769 is dit het geval. De oorspronkelijke opzet van de  administratie van de kamer Zeeland was blijkbaar de overgekomen brieven en  papieren uit Indië geografisch te ordenen en in één band alleen de  kopie-missiven van één zelfde kantoor op te nemen. Ook dit systeem is echter  verre van consequent volgehouden. Talloze delen bevatten geheel willekeurig  stukken van verschillende kantoren. Indien een band kopie-missiven uit twee of  meer kantoren bevat, wordt deze band bij dat kantoor vermeld waarvan de stukken  het grootste gedeelte van de band innemen, met vermelding van de missiven van  andere kantoren. Verwijzing naar banden in andere reeksen vindt plaats door  middel van een blanco inventarisnummer (----). Bij de rangschikking van de  kantoren is afgeweken van de door de kamer toegepaste volgorde en is die uit de  generale missiven van gouverneur-generaal en raden aangehouden",
                    'rico:hasRecordSetType':
                      'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#Series',
                    'rico:includedIn': {
                      'rico:RecordSet': {
                        'rico:identifier': 'Deel II/E',
                        'rico:title':
                          'INGEKOMEN STUKKEN VAN GOUVERNEUR-GENERAAL EN RADEN BIJ   DE HEREN XVII EN DE KAMER ZEELAND',
                        'html:p': 'Voor een toelichting zie hoofdstuk 3, p. .',
                        'rico:hasRecordSetType':
                          'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#Series',
                        'rico:includedIn': {
                          'rico:RecordSet': {
                            'rico:identifier': 'Deel II',
                            'rico:title': 'Kamer Zeeland',
                            'rico:hasRecordSetType':
                              'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#Series',
                            'rico:includedIn': {
                              'rico:RecordSet': {
                                'rico:hasRecordSetType':
                                  'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#Fonds',
                                'rico:title':
                                  'Verenigde Oostindische Compagnie (VOC)',
                                'rico:identifier': '152',
                                'rico:isDescribedBy': {
                                  'rico:Record': {
                                    'rico:hasDocumentaryFormType':
                                      'https://www.ica.org/standards/RiC/vocabularies/documentaryFormTypes#FindingAid',
                                    'rico:identifier': '1.04.02',
                                    'rico:publishedBy':
                                      'Nationaal Archief, Den Haag',
                                    'rico:managedBy': 'NL-HaNA',
                                  },
                                },
                              },
                              'rico:heldBy': 'Nationaal Archief, Den Haag',
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    },
    {
      'rico:RecordSet': {
        'rico:identifier': '8258',
        'rico:title': '\n                              ',
        'rico:date': '1792-07-09/1792-08-06',
        'rico:hasRecordSetType':
          'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#File',
        'rico:includedIn': {
          'rico:RecordSet': {
            'rico:identifier': 'div.nrs.',
            'rico:title':
              'Kopie-missiven en -rapporten ingekomen bij   gouverneur-generaal en raden uit Banjarmasin. Met bijlagen',
            'rico:hasRecordSetType':
              'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#Series',
            'rico:includedIn': {
              'rico:RecordSet': {
                'rico:identifier': 'Deel II/E.5.09',
                'rico:title': 'Banjarmasin',
                'rico:hasRecordSetType':
                  'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#Series',
                'rico:includedIn': {
                  'rico:RecordSet': {
                    'rico:identifier': 'Deel II/E.5',
                    'rico:title':
                      'Kopie-missiven en -rapporten ingekomen bij  gouverneur-generaal en raden van de kantoren in Indië',
                    'html:p':
                      "Van ieder kantoor zijn eerst de reeksen kopie-missiven en  -rapporten met bijlagen opgenomen. Dikwijls zijn echter ook van de bijlagen  aparte reeksen gevormd. Dit is weinig consequent geschied en het is daardoor  mogelijk dat stukken die in zo'n reeks bijlagen ontbreken, terug te vinden zijn  in de reeks kopie-missiven en -rapporten met bijlagen. Met name bij stukken van  na omstreeks 1769 is dit het geval. De oorspronkelijke opzet van de  administratie van de kamer Zeeland was blijkbaar de overgekomen brieven en  papieren uit Indië geografisch te ordenen en in één band alleen de  kopie-missiven van één zelfde kantoor op te nemen. Ook dit systeem is echter  verre van consequent volgehouden. Talloze delen bevatten geheel willekeurig  stukken van verschillende kantoren. Indien een band kopie-missiven uit twee of  meer kantoren bevat, wordt deze band bij dat kantoor vermeld waarvan de stukken  het grootste gedeelte van de band innemen, met vermelding van de missiven van  andere kantoren. Verwijzing naar banden in andere reeksen vindt plaats door  middel van een blanco inventarisnummer (----). Bij de rangschikking van de  kantoren is afgeweken van de door de kamer toegepaste volgorde en is die uit de  generale missiven van gouverneur-generaal en raden aangehouden",
                    'rico:hasRecordSetType':
                      'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#Series',
                    'rico:includedIn': {
                      'rico:RecordSet': {
                        'rico:identifier': 'Deel II/E',
                        'rico:title':
                          'INGEKOMEN STUKKEN VAN GOUVERNEUR-GENERAAL EN RADEN BIJ   DE HEREN XVII EN DE KAMER ZEELAND',
                        'html:p': 'Voor een toelichting zie hoofdstuk 3, p. .',
                        'rico:hasRecordSetType':
                          'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#Series',
                        'rico:includedIn': {
                          'rico:RecordSet': {
                            'rico:identifier': 'Deel II',
                            'rico:title': 'Kamer Zeeland',
                            'rico:hasRecordSetType':
                              'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#Series',
                            'rico:includedIn': {
                              'rico:RecordSet': {
                                'rico:hasRecordSetType':
                                  'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#Fonds',
                                'rico:title':
                                  'Verenigde Oostindische Compagnie (VOC)',
                                'rico:identifier': '152',
                                'rico:isDescribedBy': {
                                  'rico:Record': {
                                    'rico:hasDocumentaryFormType':
                                      'https://www.ica.org/standards/RiC/vocabularies/documentaryFormTypes#FindingAid',
                                    'rico:identifier': '1.04.02',
                                    'rico:publishedBy':
                                      'Nationaal Archief, Den Haag',
                                    'rico:managedBy': 'NL-HaNA',
                                  },
                                },
                              },
                              'rico:heldBy': 'Nationaal Archief, Den Haag',
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    },
    {
      'rico:RecordSet': {
        'rico:identifier': '8258',
        'rico:title': '\n                              ',
        'rico:date': '1792-05-16/1792-09-30',
        'rico:hasRecordSetType':
          'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#File',
        'rico:includedIn': {
          'rico:RecordSet': {
            'rico:identifier': 'div.nrs.',
            'rico:title':
              'Kopie-missiven en -rapporten ingekomen bij   gouverneur-generaal en raden uit Timor. Met bijlagen',
            'rico:hasRecordSetType':
              'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#Series',
            'rico:includedIn': {
              'rico:RecordSet': {
                'rico:identifier': 'Deel II/E.5.11',
                'rico:title': 'Timor',
                'rico:hasRecordSetType':
                  'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#Series',
                'rico:includedIn': {
                  'rico:RecordSet': {
                    'rico:identifier': 'Deel II/E.5',
                    'rico:title':
                      'Kopie-missiven en -rapporten ingekomen bij  gouverneur-generaal en raden van de kantoren in Indië',
                    'html:p':
                      "Van ieder kantoor zijn eerst de reeksen kopie-missiven en  -rapporten met bijlagen opgenomen. Dikwijls zijn echter ook van de bijlagen  aparte reeksen gevormd. Dit is weinig consequent geschied en het is daardoor  mogelijk dat stukken die in zo'n reeks bijlagen ontbreken, terug te vinden zijn  in de reeks kopie-missiven en -rapporten met bijlagen. Met name bij stukken van  na omstreeks 1769 is dit het geval. De oorspronkelijke opzet van de  administratie van de kamer Zeeland was blijkbaar de overgekomen brieven en  papieren uit Indië geografisch te ordenen en in één band alleen de  kopie-missiven van één zelfde kantoor op te nemen. Ook dit systeem is echter  verre van consequent volgehouden. Talloze delen bevatten geheel willekeurig  stukken van verschillende kantoren. Indien een band kopie-missiven uit twee of  meer kantoren bevat, wordt deze band bij dat kantoor vermeld waarvan de stukken  het grootste gedeelte van de band innemen, met vermelding van de missiven van  andere kantoren. Verwijzing naar banden in andere reeksen vindt plaats door  middel van een blanco inventarisnummer (----). Bij de rangschikking van de  kantoren is afgeweken van de door de kamer toegepaste volgorde en is die uit de  generale missiven van gouverneur-generaal en raden aangehouden",
                    'rico:hasRecordSetType':
                      'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#Series',
                    'rico:includedIn': {
                      'rico:RecordSet': {
                        'rico:identifier': 'Deel II/E',
                        'rico:title':
                          'INGEKOMEN STUKKEN VAN GOUVERNEUR-GENERAAL EN RADEN BIJ   DE HEREN XVII EN DE KAMER ZEELAND',
                        'html:p': 'Voor een toelichting zie hoofdstuk 3, p. .',
                        'rico:hasRecordSetType':
                          'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#Series',
                        'rico:includedIn': {
                          'rico:RecordSet': {
                            'rico:identifier': 'Deel II',
                            'rico:title': 'Kamer Zeeland',
                            'rico:hasRecordSetType':
                              'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#Series',
                            'rico:includedIn': {
                              'rico:RecordSet': {
                                'rico:hasRecordSetType':
                                  'https://www.ica.org/standards/RiC/vocabularies/recordSetTypes#Fonds',
                                'rico:title':
                                  'Verenigde Oostindische Compagnie (VOC)',
                                'rico:identifier': '152',
                                'rico:isDescribedBy': {
                                  'rico:Record': {
                                    'rico:hasDocumentaryFormType':
                                      'https://www.ica.org/standards/RiC/vocabularies/documentaryFormTypes#FindingAid',
                                    'rico:identifier': '1.04.02',
                                    'rico:publishedBy':
                                      'Nationaal Archief, Den Haag',
                                    'rico:managedBy': 'NL-HaNA',
                                  },
                                },
                              },
                              'rico:heldBy': 'Nationaal Archief, Den Haag',
                            },
                          },
                        },
                      },
                    },
                  },
                },
              },
            },
          },
        },
      },
    },
  ],
};

describe('RicoPipe', () => {
  it('create an instance', () => {
    const pipe = new RicoPipe();

    expect(pipe).toBeTruthy();
  });

  it('parses a rico recordset correctly', () => {
    const pipe = new RicoPipe();
    expect(pipe.transform(mock)).toEqual([
      {
        archives: [
          'Verenigde Oostindische Compagnie (VOC)',
          'Kamer Zeeland',
          'INGEKOMEN STUKKEN VAN GOUVERNEUR-GENERAAL EN RADEN BIJ   DE HEREN XVII EN DE KAMER ZEELAND',
          'Kopie-missiven en -rapporten ingekomen bij  gouverneur-generaal en raden van de kantoren in Indië',
          'Makassar',
          'Kopie-missiven en -rapporten ingekomen bij   gouverneur-generaal en raden uit Makassar. Met bijlagen',
          'Makassar, 1791 okt. 31 - 1792 okt. 19; N.B.  Bevat ook een overzicht van verkochte goederen, 1791 - 1792. Banjarmasin, 1792  juli 9 - aug. 6; Timor, 1792 mei 16 - sep. 30 ',
        ],
        date: [1791, 1792],
        access: '1.04.02',
        archive: 'Nationaal Archief, Den Haag - NL-HaNA',
        inventory: '8258',
        title:
          'Makassar, 1791 okt. 31 - 1792 okt. 19; N.B.  Bevat ook een overzicht van verkochte goederen, 1791 - 1792. Banjarmasin, 1792  juli 9 - aug. 6; Timor, 1792 mei 16 - sep. 30 ',
      },
      {
        archives: [
          'Verenigde Oostindische Compagnie (VOC)',
          'Kamer Zeeland',
          'INGEKOMEN STUKKEN VAN GOUVERNEUR-GENERAAL EN RADEN BIJ   DE HEREN XVII EN DE KAMER ZEELAND',
          'Kopie-missiven en -rapporten ingekomen bij  gouverneur-generaal en raden van de kantoren in Indië',
          'Banjarmasin',
          'Kopie-missiven en -rapporten ingekomen bij   gouverneur-generaal en raden uit Banjarmasin. Met bijlagen',
        ],
        date: [1792],
        access: '1.04.02',
        archive: 'Nationaal Archief, Den Haag - NL-HaNA',
        inventory: '8258',
        title:
          'Kopie-missiven en -rapporten ingekomen bij   gouverneur-generaal en raden uit Banjarmasin. Met bijlagen',
      },
      {
        archives: [
          'Verenigde Oostindische Compagnie (VOC)',
          'Kamer Zeeland',
          'INGEKOMEN STUKKEN VAN GOUVERNEUR-GENERAAL EN RADEN BIJ   DE HEREN XVII EN DE KAMER ZEELAND',
          'Kopie-missiven en -rapporten ingekomen bij  gouverneur-generaal en raden van de kantoren in Indië',
          'Timor',
          'Kopie-missiven en -rapporten ingekomen bij   gouverneur-generaal en raden uit Timor. Met bijlagen',
        ],
        date: [1792],
        access: '1.04.02',
        archive: 'Nationaal Archief, Den Haag - NL-HaNA',
        inventory: '8258',
        title:
          'Kopie-missiven en -rapporten ingekomen bij   gouverneur-generaal en raden uit Timor. Met bijlagen',
      },
    ]);
  });
});
